<form class="w-full" [formGroup]="form" autocomplete="off">
    <div class="header-dialog-user">
        <div class="header-container-user gap-3 flex">
            <mat-icon class="icon-size-7" svgIcon="mat_outline:person_outline"></mat-icon>
            <div class="header-text"> {{ data.object ? 'Editar' : 'Agregar' }} capacitación</div>
        </div>
    </div>
    <div class="body-dialog-user">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="col-span-1">
                <mat-form-field class="mat-form-field-custom w-full" appearance="outline" floatLabel="always">
                    <mat-label>Institución</mat-label>
                    <input
                        formControlName="sInstitucion"
                        matInput 
                        placeholder="--"
                        type="text"
                        (keypress)="onKeyPress($event)"
                        (input)="onInput($event, 'sInstitucion')"
                        maxlength="100">
                        @if(form.get('sInstitucion').invalid) {
                            <mat-error class="text-red-500">
                                {{ form.get("sInstitucion") | translateMessageForm }}
                            </mat-error>
                        }
                </mat-form-field>     
            </div>
            <div class="col-span-1">
                <mat-form-field class="mat-form-field-custom w-full" appearance="outline" floatLabel="always">
                    <mat-label>Tipo de curso</mat-label>
                    <mat-select
                        formControlName="nTipoCursoId"
                        placeholder="--">
                        @for (item of []; track $index) {
                            <mat-option [value]="item?.nConValor">
                                {{ item?.sConDescripcion }}
                            </mat-option>
                        }
                    </mat-select>
                        @if(form.get('nTipoCursoId').invalid) {
                            <mat-error class="text-red-500">
                                {{ form.get("nTipoCursoId") | translateMessageForm: 'select' }}
                            </mat-error>
                        }
                </mat-form-field>     
            </div>
            <div class="col-span-1">
                <mat-form-field class="mat-form-field-custom w-full" appearance="outline" floatLabel="always">
                    <mat-label>Nombre de la especialidad</mat-label>
                    <input
                        formControlName="sNombreEspecialidad"
                        matInput 
                        placeholder="--"
                        type="text"
                        (keypress)="onKeyPress($event)"
                        (input)="onInput($event, 'sNombreEspecialidad')"
                        maxlength="100">
                        @if(form.get('sNombreEspecialidad').invalid) {
                            <mat-error class="text-red-500">
                                {{ form.get("sNombreEspecialidad") | translateMessageForm }}
                            </mat-error>
                        }
                </mat-form-field>     
            </div>
            <div class="col-span-1">
                <mat-form-field class="mat-form-field-custom w-full" appearance="outline" floatLabel="always">
                    <mat-label>Horas lectivas</mat-label>
                    <input
                        formControlName="nHorasLectivas"
                        matInput 
                        placeholder="--"
                        type="number"
                        min="1"
                        (keydown)="preventInvalidInput($event)"
                        (input)="enforceRange($event)"
                        max="200">
                        @if(form.get('nHorasLectivas').invalid) {
                            <mat-error class="text-red-500">
                                {{ form.get("nHorasLectivas") | translateMessageForm }}
                            </mat-error>
                        }
                </mat-form-field>     
            </div>

            <div class="col-span-1">
                <mat-form-field
                    class="mat-form-field-custom w-full"
                    appearance="outline"
                    floatLabel="always">
                <mat-label>Fecha de Inicio</mat-label>
                <input
                    (keypress)="onKeyPressDate($event)"
                    (input)="onInputDate($event, 'dFechaInicio')"
                    [max]="maxDateStart"
                    [min]="minDateStart"
                    formControlName="dFechaInicio"
                    matInput
                    maxlength="10"
                    placeholder="--/--/----"
                    [matDatepicker]="pickerStart"
                />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="pickerStart"
                ></mat-datepicker-toggle>
                <mat-datepicker #pickerStart>
                    <mat-datepicker-actions>
                        <button mat-button matDatepickerCancel>
                            Cancelar
                        </button>
                        <button mat-raised-button color="primary"matDatepickerApply>
                            Aplicar
                        </button>
                    </mat-datepicker-actions>
                </mat-datepicker>
                @if(form.get('dFechaInicio').invalid) {
                    <mat-error class="text-red-500">
                        {{ form.get("dFechaInicio") | translateMessageForm: "date" }}
                    </mat-error>
                }
            </mat-form-field>
        </div>
        <div class="col-span-1">
            <mat-form-field
                class="mat-form-field-custom w-full"
                appearance="outline"
                floatLabel="always">
            <mat-label>Fecha fin</mat-label>
            <input
                (keypress)="onKeyPressDate($event)"
                (input)="onInputDate($event, 'dFechaFin')"
                [max]="maxDateEnd"
                [min]="minDateEnd"
                formControlName="dFechaFin"
                matInput
                maxlength="10"
                placeholder="--/--/----"
                [matDatepicker]="pickerEnd"
            />
            <mat-datepicker-toggle
                matSuffix
                [for]="pickerEnd"
            ></mat-datepicker-toggle>
            <mat-datepicker #pickerEnd>
                <mat-datepicker-actions>
                    <button mat-button matDatepickerCancel>
                        Cancelar
                    </button>
                    <button mat-raised-button color="primary"matDatepickerApply>
                        Aplicar
                    </button>
                </mat-datepicker-actions>
            </mat-datepicker>
            @if(form.get('dFechaFin').invalid) {
                <mat-error class="text-red-500">
                    {{ form.get("dFechaFin") | translateMessageForm: "date" }}
                </mat-error>
            }
        </mat-form-field>
    </div>
        </div>
        <div class="btn-options-user justify-center  md:justify-end">
            <fo-button-dialog
                [textBtn]="'Cancelar'"
                [typeButton]="buttonEnum().CANCEL"
                matDialogClose>
            </fo-button-dialog>
            <fo-button-dialog
                [btnDisabled]="loadingService()"
                [textBtn]="isEdit() ? 'Guardar' : 'Crear'"
                (eventActionClick)="registerForm()"
                >
            </fo-button-dialog>
        </div>
    </div>
</form>